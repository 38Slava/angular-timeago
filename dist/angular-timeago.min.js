/**
 * Angular directive/filter/service for formatting date so that it displays how long ago the given time was compared to now.
 * @version v0.2.3 - 2015-08-26
 * @link https://github.com/yaru22/angular-timeago
 * @author Brian Park <yaru22@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("yaru22.angular-timeago",[]).directive("timeAgo",["timeAgo","nowTime",function(n,e){return{scope:{fromTime:"@",format:"@"},restrict:"EA",link:function(r,o){var u=n.parse(r.fromTime);r.$watch(function(){return e()-u},function(e){angular.element(o).text(n.inWords(e,u,r.format))})}}}]).factory("nowTime",["$window","$rootScope",function(n,e){var r=Date.now(),o=function(){n.setTimeout(function(){e.$apply(function(){r=Date.now(),o()})},1e3)};return o(),function(){return r}}]).factory("timeAgo",["$filter",function(n){var e={};return e.settings={refreshMillis:6e4,allowFuture:!1,overrideLang:null,fullDateAfterSeconds:null,strings:{it_IT:{prefixAgo:null,prefixFromNow:null,suffixAgo:"fa",suffixFromNow:"da ora",seconds:"meno di un minuto",minute:"circa un minuto",minutes:"%d minuti",hour:"circa un' ora",hours:"circa %d ore",day:"un giorno",days:"%d giorni",month:"circa un mese",months:"%d mesi",year:"circa un anno",years:"%d anni",numbers:[]},en_US:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]},de_DE:{prefixAgo:"vor",prefixFromNow:"in",suffixAgo:null,suffixFromNow:null,seconds:"weniger als einer Minute",minute:"ca. einer Minute",minutes:"%d Minuten",hour:"ca. einer Stunde",hours:"ca. %d Stunden",day:"einem Tag",days:"%d Tagen",month:"ca. einem Monat",months:"%d Monaten",year:"ca. einem Jahr",years:"%d Jahren",numbers:[]},he_IL:{prefixAgo:null,prefixFromNow:null,suffixAgo:"לפני",suffixFromNow:"מעכשיו",seconds:"פחות מדקה",minute:"כדקה",minutes:"%d דקות",hour:"כשעה",hours:"כ %d שעות",day:"יום",days:"%d ימים",month:"כחודש",months:"%d חודשים",year:"כשנה",years:"%d שנים",numbers:[]},pt_BR:{prefixAgo:null,prefixFromNow:"daqui a",suffixAgo:"atrás",suffixFromNow:null,seconds:"menos de um minuto",minute:"cerca de um minuto",minutes:"%d minutos",hour:"cerca de uma hora",hours:"cerca de %d horas",day:"um dia",days:"%d dias",month:"cerca de um mês",months:"%d meses",year:"cerca de um ano",years:"%d anos",numbers:[]},ca_ES:{prefixAgo:"fa",prefixFromNow:"d'aquí",suffixAgo:null,suffixFromNow:null,seconds:"menys d'un minut",minute:"prop d'un minut",minutes:"%d minuts",hour:"prop d'una hora",hours:"prop de %d hores",day:"un dia",days:"%d dies",month:"prop d'un mes",months:"%d mesos",year:"prop d'un any",years:"%d anys",numbers:[]},fr_FR:{prefixAgo:"il y a",prefixFromNow:"dans",suffixAgo:null,suffixFromNow:null,seconds:"moins d'une minute",minute:"environ une minute",minutes:"%d minutes",hour:"environ une heure",hours:"environ %d heures",day:"un jour",days:"%d jours",month:"environ un mois",months:"%d mois",year:"environ un an",years:"%d ans",numbers:[]},es_LA:{prefixAgo:"hace",prefixFromNow:"en",suffixAgo:null,suffixFromNow:null,seconds:"menos de un minuto",minute:"un minuto",minutes:"%d minutos",hour:"una hora",hours:"%d horas",day:"un día",days:"%d días",month:"un mes",months:"%d meses",year:"un año",years:"%d años",numbers:[]},nl_NL:{prefixAgo:null,prefixFromNow:"over",suffixAgo:"geleden",suffixFromNow:"vanaf nu",seconds:"een paar seconden",minute:"ongeveer een minuut",minutes:"%d minuten",hour:"een uur",hours:"%d uur",day:"een dag",days:"%d dagen",month:"een maand",months:"%d maanden",year:"een jaar",years:"%d jaar",numbers:[]}}},e.inWords=function(r,o,u,a){function i(n,e){var o=angular.isFunction(n)?n(e,r):n,u=d.numbers&&d.numbers[e]||e;return o.replace(/%d/i,u)}var s=parseInt(e.settings.fullDateAfterSeconds,10);if(!isNaN(s)){var t=1e3*s;if(r>=0&&r>=t||0>r&&t>=r)return u?n("date")(o,u,a):o}var m,d,f=e.settings.overrideLang,c=document.documentElement.lang,l=e.settings.strings;"undefined"!=typeof l[f]?(m=f,d=l[f]):"undefined"!=typeof l[c]?(m=c,d=l[c]):(m="en_US",d=l[m]);var h=d.prefixAgo,y=d.suffixAgo;e.settings.allowFuture&&0>r&&(h=d.prefixFromNow,y=d.suffixFromNow);var p=Math.abs(r)/1e3,g=p/60,x=g/60,w=x/24,A=w/365,v=45>p&&i(d.seconds,Math.round(p))||90>p&&i(d.minute,1)||45>g&&i(d.minutes,Math.round(g))||90>g&&i(d.hour,1)||24>x&&i(d.hours,Math.round(x))||42>x&&i(d.day,1)||30>w&&i(d.days,Math.round(w))||45>w&&i(d.month,1)||365>w&&i(d.months,Math.round(w/30))||1.5>A&&i(d.year,1)||i(d.years,Math.round(A)),F=void 0===d.wordSeparator?" ":d.wordSeparator;return"he_IL"===m?[h,y,v].join(F).trim():[h,v,y].join(F).trim()},e.parse=function(n){if(n instanceof Date)return n;if(angular.isNumber(n))return new Date(n);if(/^\d+$/.test(n))return new Date(parseInt(n,10));var e=(n||"").trim();return e=e.replace(/\.\d+/,""),e=e.replace(/-/,"/").replace(/-/,"/"),e=e.replace(/T/," ").replace(/Z/," UTC"),e=e.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(e)},e}]).filter("timeAgo",["nowTime","timeAgo",function(n,e){return function(r,o,u){var a=e.parse(r),i=n()-a;return e.inWords(i,a,o,u)}}]);
